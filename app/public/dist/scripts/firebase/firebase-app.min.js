let stringToByteArray$1=function(r){var n=[];let a=0;for(let t=0;t<r.length;t++){let e=r.charCodeAt(t);e<128?n[a++]=e:(e<2048?n[a++]=e>>6|192:(55296==(64512&e)&&t+1<r.length&&56320==(64512&r.charCodeAt(t+1))?(e=65536+((1023&e)<<10)+(1023&r.charCodeAt(++t)),n[a++]=e>>18|240,n[a++]=e>>12&63|128):n[a++]=e>>12|224,n[a++]=e>>6&63|128),n[a++]=63&e|128)}return n},byteArrayToString=function(e){var t=[];let r=0,n=0;for(;r<e.length;){var a,i,o,s=e[r++];s<128?t[n++]=String.fromCharCode(s):191<s&&s<224?(a=e[r++],t[n++]=String.fromCharCode((31&s)<<6|63&a)):239<s&&s<365?(a=((7&s)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))):(i=e[r++],o=e[r++],t[n++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o))}return t.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();var a=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){var o=n[r],s=r+1<n.length,l=s?n[r+1]:0,c=r+2<n.length,h=c?n[r+2]:0;let e=(15&l)<<2|h>>6,t=63&h;c||(t=64,s)||(e=64),i.push(a[o>>2],a[(3&o)<<4|l>>4],a[e],a[t])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(stringToByteArray$1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):byteArrayToString(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(t,e){this.init_();var r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let e=0;e<t.length;){var a=r[t.charAt(e++)],i=e<t.length?r[t.charAt(e)]:0,o=++e<t.length?r[t.charAt(e)]:64,s=++e<t.length?r[t.charAt(e)]:64;if(++e,null==a||null==i||null==o||null==s)throw new DecodeBase64StringError;n.push(a<<2|i>>4),64!==o&&(n.push(i<<4&240|o>>2),64!==s)&&n.push(o<<6&192|s)}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let base64Encode=function(e){e=stringToByteArray$1(e);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(e){return base64Encode(e).replace(/\./g,"")},base64Decode=function(e){try{return base64.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function getGlobal(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}let getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{var e;return"undefined"!=typeof process&&void 0!==process.env&&(e=process.env.__FIREBASE_DEFAULTS__)?JSON.parse(e):void 0},getDefaultsFromCookie=()=>{if("undefined"!=typeof document){let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var t=e&&base64Decode(e[1]);return t&&JSON.parse(t)}},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(e){console.info("Unable to get __FIREBASE_DEFAULTS__ due to: "+e)}},getDefaultAppConfig=()=>{var e;return null==(e=getDefaults())?void 0:e.config};class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(r){return(e,t)=>{e?this.reject(e):this.resolve(t),"function"==typeof r&&(this.promise.catch(()=>{}),1===r.length?r(e):r(e,t))}}}function isBrowser(){return"undefined"!=typeof window||isWebWorker()}function isWebWorker(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function isIndexedDBAvailable(){try{return"object"==typeof indexedDB}catch(e){return!1}}function validateIndexedDBOpenable(){return new Promise((n,a)=>{try{let e=!0,t="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(t);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(t),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var e;a((null==(e=r.error)?void 0:e.message)||"")}}catch(e){a(e)}})}let ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var t=t[0]||{},r=this.service+"/"+e,e=this.errors[e],e=e?replaceTemplate(e,t):"Error",e=this.serviceName+`: ${e} (${r}).`;return new FirebaseError(r,e,t)}}function replaceTemplate(e,n){return e.replace(PATTERN,(e,t)=>{var r=n[t];return null!=r?String(r):`<${t}?>`})}let PATTERN=/\{\$([^}]+)}/g;function deepEqual(e,t){if(e!==t){var r,n,a=Object.keys(e),i=Object.keys(t);for(r of a){if(!i.includes(r))return!1;var o=e[r],s=t[r];if(isObject(o)&&isObject(s)){if(!deepEqual(o,s))return!1}else if(o!==s)return!1}for(n of i)if(!a.includes(n))return!1}return!0}function isObject(e){return null!==e&&"object"==typeof e}class Component{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let DEFAULT_ENTRY_NAME$1="[DEFAULT]";class Provider{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){e=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(e)){var t=new Deferred;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&t.resolve(r)}catch(e){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),t=null!=(t=null==t?void 0:t.optional)&&t;if(!this.isInitialized(e)&&!this.shouldAutoInitialize()){if(t)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:e})}catch(e){if(t)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch(e){}for(var[t,r]of this.instancesDeferred.entries()){t=this.normalizeInstanceIdentifier(t);try{var n=this.getOrInitializeService({instanceIdentifier:t});r.resolve(n)}catch(e){}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){var e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){var{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(this.name+`(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);var n,a,i=this.getOrInitializeService({instanceIdentifier:r,options:t});for([n,a]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(n)&&a.resolve(i);return i}onInit(e,t){t=this.normalizeInstanceIdentifier(t);let r=null!=(n=this.onInitCallbacks.get(t))?n:new Set;r.add(e),this.onInitCallbacks.set(t,r);var n=this.instances.get(t);return n&&e(n,t),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){var r=this.onInitCallbacks.get(t);if(r)for(var n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return!this.component||this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function normalizeIdentifierForFactory(e){return e===DEFAULT_ENTRY_NAME$1?void 0:e}function isComponentEager(e){return"EAGER"===e.instantiationMode}class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with `+this.name);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){var t;return this.providers.has(e)?this.providers.get(e):(t=new Provider(e,this),this.providers.set(e,t),t)}getProviders(){return Array.from(this.providers.values())}}let instances=[];var LogLevel;(e=>{e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(LogLevel=LogLevel||{});let levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(e,t,...r)=>{if(!(t<e.logLevel)){var n=(new Date).toISOString(),a=ConsoleMethod[t];if(!a)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[a](`[${n}]  ${e.name}:`,...r)}};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null,instances.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}function setLogLevel$1(t){instances.forEach(e=>{e.setLogLevel(t)})}function setUserLogHandler(i,e){for(var t of instances){let a=null;e&&e.level&&(a=levelStringToEnum[e.level]),t.userLogHandler=null===i?null:(e,t,...r)=>{var n=r.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");t>=(null!=a?a:e.logLevel)&&i({level:LogLevel[t].toLowerCase(),message:n,args:r,type:e.name})}}}let instanceOfAny=(t,e)=>e.some(e=>t instanceof e),idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes=idbProxyableTypes||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function getCursorAdvanceMethods(){return cursorAdvanceMethods=cursorAdvanceMethods||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}let cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(i){var e=new Promise((e,t)=>{let r=()=>{i.removeEventListener("success",n),i.removeEventListener("error",a)},n=()=>{e(wrap(i.result)),r()},a=()=>{t(i.error),r()};i.addEventListener("success",n),i.addEventListener("error",a)});return e.then(e=>{e instanceof IDBCursor&&cursorRequestMap.set(e,i)}).catch(()=>{}),reverseTransformCache.set(e,i),e}function cacheDonePromiseForTransaction(i){var e;transactionDoneMap.has(i)||(e=new Promise((e,t)=>{let r=()=>{i.removeEventListener("complete",n),i.removeEventListener("error",a),i.removeEventListener("abort",a)},n=()=>{e(),r()},a=()=>{t(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",n),i.addEventListener("error",a),i.addEventListener("abort",a)}),transactionDoneMap.set(i,e))}let idbProxyTraps={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return transactionDoneMap.get(e);if("objectStoreNames"===t)return e.objectStoreNames||transactionStoreNamesMap.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wrap(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function replaceTraps(e){idbProxyTraps=e(idbProxyTraps)}function wrapFunction(r){return r!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?getCursorAdvanceMethods().includes(r)?function(...e){return r.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(r.apply(unwrap(this),e))}:function(e,...t){t=r.call(unwrap(this),e,...t);return transactionStoreNamesMap.set(t,e.sort?e.sort():[e]),wrap(t)}}function transformCachableValue(e){return"function"==typeof e?wrapFunction(e):(e instanceof IDBTransaction&&cacheDonePromiseForTransaction(e),instanceOfAny(e,getIdbProxyableTypes())?new Proxy(e,idbProxyTraps):e)}function wrap(e){var t;return e instanceof IDBRequest?promisifyRequest(e):transformCache.has(e)?transformCache.get(e):((t=transformCachableValue(e))!==e&&(transformCache.set(e,t),reverseTransformCache.set(t,e)),t)}let unwrap=e=>reverseTransformCache.get(e);function openDB(e,t,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){let o=indexedDB.open(e,t);e=wrap(o);return n&&o.addEventListener("upgradeneeded",e=>{n(wrap(o.result),e.oldVersion,e.newVersion,wrap(o.transaction),e)}),r&&o.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),e.then(e=>{i&&e.addEventListener("close",()=>i()),a&&e.addEventListener("versionchange",e=>a(e.oldVersion,e.newVersion,e))}).catch(()=>{}),e}let readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(cachedMethods.get(t))return cachedMethods.get(t);let n=t.replace(/FromIndex$/,""),a=t!==n,i=writeMethods.includes(n);return n in(a?IDBIndex:IDBObjectStore).prototype&&(i||readMethods.includes(n))?(e=async function(e,...t){e=this.transaction(e,i?"readwrite":"readonly");let r=e.store;return a&&(r=r.index(t.shift())),(await Promise.all([r[n](...t),i&&e.done]))[0]},cachedMethods.set(t,e),e):void 0}}replaceTraps(n=>({...n,get:(e,t,r)=>getMethod(e,t)||n.get(e,t,r),has:(e,t)=>!!getMethod(e,t)||n.has(e,t)}));class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>isVersionServiceProvider(e)?(e=e.getImmediate()).library+"/"+e.version:null).filter(e=>e).join(" ")}}function isVersionServiceProvider(e){e=e.getComponent();return"VERSION"===(null==e?void 0:e.type)}let name$q="https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js",version$1="0.10.13",logger=new Logger("https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2="@firebase/vertexai-preview",name$1="@firebase/firestore-compat",name$r="firebase",version$2="10.14.1",DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1]:"fire-fst-compat",[name$2]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"},_apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(t,r){try{t.container.addComponent(r)}catch(e){logger.debug(`Component ${r.name} failed to register with FirebaseApp `+t.name,e)}}function _addOrOverwriteComponent(e,t){e.container.addOrOverwriteComponent(t)}function _registerComponent(e){var t,r,n=e.name;if(_components.has(n))return logger.debug(`There were multiple attempts to register component ${n}.`),!1;_components.set(n,e);for(t of _apps.values())_addComponent(t,e);for(r of _serverApps.values())_addComponent(r,e);return!0}function _getProvider(e,t){var r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function _removeServiceInstance(e,t,r=DEFAULT_ENTRY_NAME){_getProvider(e,t).clearInstance(r)}function _isFirebaseApp(e){return void 0!==e.options}function _isFirebaseServerApp(e){return void 0!==e.settings}function _clearComponents(){_components.clear()}let ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);class FirebaseAppImpl{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}class FirebaseServerAppImpl extends FirebaseAppImpl{constructor(e,t,r,n){var a=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,r={name:r,automaticDataCollectionEnabled:a};void 0!==e.apiKey?super(e,r,n):super(e.options,r,n),this._serverConfig=Object.assign({automaticDataCollectionEnabled:a},t),this._finalizationRegistry=null,"undefined"!=typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,registerVersion(name$q,version$1,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){deleteApp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("server-app-deleted")}}let SDK_VERSION=version$2;function initializeApp(e,t={}){let r=e;if("object"!=typeof t){let e=t;t={name:e}}e=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},t);let n=e.name;if("string"!=typeof n||!n)throw ERROR_FACTORY.create("bad-app-name",{appName:String(n)});if(!(r=r||getDefaultAppConfig()))throw ERROR_FACTORY.create("no-options");t=_apps.get(n);if(t){if(deepEqual(r,t.options)&&deepEqual(e,t.config))return t;throw ERROR_FACTORY.create("duplicate-app",{appName:n})}var a,i=new ComponentContainer(n);for(a of _components.values())i.addComponent(a);t=new FirebaseAppImpl(r,e,i);return _apps.set(n,t),t}function initializeServerApp(e,t){if(isBrowser()&&!isWebWorker())throw ERROR_FACTORY.create("invalid-server-app-environment");void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1);let r;r=_isFirebaseApp(e)?e.options:e;e=Object.assign(Object.assign({},t),r);void 0!==e.releaseOnDeref&&delete e.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw ERROR_FACTORY.create("finalization-registry-not-supported",{});var e=""+[...JSON.stringify(e)].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0),n=_serverApps.get(e);if(n)return n.incRefCount(t.releaseOnDeref),n;var a,i=new ComponentContainer(e);for(a of _components.values())i.addComponent(a);n=new FirebaseServerAppImpl(r,t,e,i);return _serverApps.set(e,n),n}function getApp(e=DEFAULT_ENTRY_NAME){var t=_apps.get(e);if(!t&&e===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(t)return t;throw ERROR_FACTORY.create("no-app",{appName:e})}function getApps(){return Array.from(_apps.values())}async function deleteApp(e){let t=!1;var r=e.name;_apps.has(r)?(t=!0,_apps.delete(r)):_serverApps.has(r)&&e.decRefCount()<=0&&(_serverApps.delete(r),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function registerVersion(e,t,r){let n,a=null!=(n=PLATFORM_LOG_STRING[e])?n:e;r&&(a+="-"+r);var i,e=a.match(/\s|\//),r=t.match(/\s|\//);e||r?(i=[`Unable to register library "${a}" with version "${t}":`],e&&i.push(`library name "${a}" contains illegal characters (whitespace or "/")`),e&&r&&i.push("and"),r&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),logger.warn(i.join(" "))):_registerComponent(new Component(a+"-version",()=>({library:a,version:t}),"VERSION"))}function onLog(e,t){if(null!==e&&"function"!=typeof e)throw ERROR_FACTORY.create("invalid-log-argument");setUserLogHandler(e,t)}function setLogLevel(e){setLogLevel$1(e)}let DB_NAME="firebase-heartbeat-database",DB_VERSION=1,STORE_NAME="firebase-heartbeat-store",dbPromise=null;function getDbPromise(){return dbPromise=dbPromise||openDB(DB_NAME,DB_VERSION,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(STORE_NAME)}catch(e){console.warn(e)}}}).catch(e=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:e.message})})}async function readHeartbeatsFromIndexedDB(t){try{var e=(await getDbPromise()).transaction(STORE_NAME),r=await e.objectStore(STORE_NAME).get(computeKey(t));return await e.done,r}catch(e){e instanceof FirebaseError?logger.warn(e.message):(t=ERROR_FACTORY.create("idb-get",{originalErrorMessage:null==e?void 0:e.message}),logger.warn(t.message))}}async function writeHeartbeatsToIndexedDB(e,t){try{var r=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await r.objectStore(STORE_NAME).put(t,computeKey(e)),await r.done}catch(e){e instanceof FirebaseError?logger.warn(e.message):(t=ERROR_FACTORY.create("idb-set",{originalErrorMessage:null==e?void 0:e.message}),logger.warn(t.message))}}function computeKey(e){return e.name+"!"+e.options.appId}let MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=2592e6;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;e=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(e),this._heartbeatsCachePromise=this._storage.read().then(e=>this._heartbeatsCache=e)}async triggerHeartbeat(){var e,r;try{var n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString();let t=getUTCDateString();if((null!=(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null==(r=this._heartbeatsCache)?void 0:r.heartbeats)))&&(this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{e=new Date(e.date).valueOf();return Date.now()-e<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}catch(e){logger.warn(e)}}async getHeartbeatsHeader(){var e,t,r,n,a;try{return(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)?"":(t=getUTCDateString(),{heartbeatsToSend:r,unsentEntries:n}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),a=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,0<n.length?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a)}catch(e){return logger.warn(e),""}}}function getUTCDateString(){return(new Date).toISOString().substring(0,10)}function extractHeartbeatsForHeader(e,r=MAX_HEADER_BYTES){var n=[];let a=e.slice();for(let t of e){var i=n.find(e=>e.agent===t.agent);if(i){if(i.dates.push(t.date),countBytes(n)>r){i.dates.pop();break}}else if(n.push({agent:t.agent,dates:[t.date]}),countBytes(n)>r){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!isIndexedDBAvailable()&&validateIndexedDBOpenable().then(()=>!0).catch(()=>!1)}async read(){var e;return await this._canUseIndexedDBPromise&&null!=(e=await readHeartbeatsFromIndexedDB(this.app))&&e.heartbeats?e:{heartbeats:[]}}async overwrite(e){var t,r;if(await this._canUseIndexedDBPromise)return r=await this.read(),writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}async add(e){var t,r;if(await this._canUseIndexedDBPromise)return r=await this.read(),writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}function countBytes(e){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:e})).length}function registerCoreComponents(e){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1,e),registerVersion(name$q,version$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var name="firebase",version="10.14.1";registerVersion(name,version,"cdn");export{FirebaseError,SDK_VERSION,DEFAULT_ENTRY_NAME as _DEFAULT_ENTRY_NAME,_addComponent,_addOrOverwriteComponent,_apps,_clearComponents,_components,_getProvider,_isFirebaseApp,_isFirebaseServerApp,_registerComponent,_removeServiceInstance,_serverApps,deleteApp,getApp,getApps,initializeApp,initializeServerApp,onLog,registerVersion,setLogLevel};
//# sourceMappingURL=firebase-app.min.js.map
