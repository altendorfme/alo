import{registerVersion as e,_registerComponent as t,_getProvider,getApp as n}from"https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";class FirebaseError extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name="FirebaseError",Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){var n,t=t[0]||{},a=this.service+"/"+e,e=this.errors[e],e=e?(n=t,e.replace(r,(e,t)=>{var a=n[t];return null!=a?String(a):`<${t}?>`})):"Error",e=this.serviceName+`: ${e} (${a}).`;return new FirebaseError(a,e,t)}}let r=/\{\$([^}]+)}/g;function getModularInstance(e){return e&&e._delegate?e._delegate:e}class Component{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let a,o,i=new WeakMap,s=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p={get(e,t,a){if(e instanceof IDBTransaction){if("done"===t)return s.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return wrap(e[t])},set:(e,t,a)=>(e[t]=a,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function wrapFunction(a){return a!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o=o||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]).includes(a)?function(...e){return a.apply(unwrap(this),e),wrap(i.get(this))}:function(...e){return wrap(a.apply(unwrap(this),e))}:function(e,...t){t=a.call(unwrap(this),e,...t);return c.set(t,e.sort?e.sort():[e]),wrap(t)}}function transformCachableValue(e){return"function"==typeof e?wrapFunction(e):(e instanceof IDBTransaction&&(i=e,s.has(i)||(t=new Promise((e,t)=>{let a=()=>{i.removeEventListener("complete",n),i.removeEventListener("error",r),i.removeEventListener("abort",r)},n=()=>{e(),a()},r=()=>{t(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",n),i.addEventListener("error",r),i.addEventListener("abort",r)}),s.set(i,t))),n=e,(a=a||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]).some(e=>n instanceof e)?new Proxy(e,p):e);var i,t,n}function wrap(e){var o,t;return e instanceof IDBRequest?(o=e,(t=new Promise((e,t)=>{let a=()=>{o.removeEventListener("success",n),o.removeEventListener("error",r)},n=()=>{e(wrap(o.result)),a()},r=()=>{t(o.error),a()};o.addEventListener("success",n),o.addEventListener("error",r)})).then(e=>{e instanceof IDBCursor&&i.set(e,o)}).catch(()=>{}),d.set(t,o),t):u.has(e)?u.get(e):((t=transformCachableValue(e))!==e&&(u.set(e,t),d.set(t,e)),t)}let unwrap=e=>d.get(e);function openDB(e,t,{blocked:a,upgrade:n,blocking:r,terminated:i}={}){let o=indexedDB.open(e,t),s=wrap(o);return n&&o.addEventListener("upgradeneeded",e=>{n(wrap(o.result),e.oldVersion,e.newVersion,wrap(o.transaction),e)}),a&&o.addEventListener("blocked",e=>a(e.oldVersion,e.newVersion,e)),s.then(e=>{i&&e.addEventListener("close",()=>i()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}function deleteDB(e,{blocked:t}={}){e=indexedDB.deleteDatabase(e);return t&&e.addEventListener("blocked",e=>t(e.oldVersion,e)),wrap(e).then(()=>{})}let l=["get","getKey","getAll","getAllKeys","count"],g=["put","add","delete","clear"],f=new Map;function getMethod(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(f.get(t))return f.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=g.includes(n);return n in(r?IDBIndex:IDBObjectStore).prototype&&(i||l.includes(n))?(e=async function(e,...t){e=this.transaction(e,i?"readwrite":"readonly");let a=e.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&e.done]))[0]},f.set(t,e),e):void 0}}(e=>{p=e(p)})(n=>({...n,get:(e,t,a)=>getMethod(e,t)||n.get(e,t,a),has:(e,t)=>!!getMethod(e,t)||n.has(e,t)}));let h="@firebase/installations",w=new ErrorFactory("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function isServerError(e){return e instanceof FirebaseError&&e.code.includes("request-failed")}function getInstallationsEndpoint({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function extractAuthTokenInfoFromResponse(e){return{token:e.token,requestStatus:2,expiresIn:Number(e.expiresIn.replace("s","000")),creationTime:Date.now()}}async function getErrorFromResponse(e,t){t=(await t.json()).error;return w.create("request-failed",{requestName:e,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})}function getHeaders$1({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function getHeadersWithAuth(e,{refreshToken:t}){e=getHeaders$1(e);return e.append("Authorization","FIS_v2 "+t),e}async function retryIfServerError(e){var t=await e();return 500<=t.status&&t.status<600?e():t}function sleep(t){return new Promise(e=>{setTimeout(e,t)})}let m=/^[cdef][\w-]{21}$/;function generateFid(){try{var e=new Uint8Array(17),t=((self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16,a=e,btoa(String.fromCharCode(...a)).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22));return m.test(t)?t:""}catch(e){return""}var a}function getKey$1(e){return e.appName+"!"+e.appId}let y=new Map;function fidChanged(e,t){var a,e=getKey$1(e);callFidChangeCallbacks(e,t),e=e,t=t,!b&&"BroadcastChannel"in self&&((b=new BroadcastChannel("[Firebase] FID Change")).onmessage=e=>{callFidChangeCallbacks(e.data.key,e.data.fid)}),(a=b)&&a.postMessage({key:e,fid:t}),0===y.size&&b&&(b.close(),b=null)}function callFidChangeCallbacks(e,t){var a=y.get(e);if(a)for(let e of a)e(t)}let b=null,v="firebase-installations-store",k=null;function getDbPromise$1(){return k=k||openDB("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(v)}})}async function set(e,t){var a=getKey$1(e),n=(await getDbPromise$1()).transaction(v,"readwrite"),r=n.objectStore(v),i=await r.get(a);return await r.put(t,a),await n.done,i&&i.fid===t.fid||fidChanged(e,t.fid),t}async function remove(e){var e=getKey$1(e),t=(await getDbPromise$1()).transaction(v,"readwrite");await t.objectStore(v).delete(e),await t.done}async function update(e,t){var a=getKey$1(e),n=(await getDbPromise$1()).transaction(v,"readwrite"),r=n.objectStore(v),i=await r.get(a),t=t(i);return void 0===t?await r.delete(a):await r.put(t,a),await n.done,!t||i&&i.fid===t.fid||fidChanged(e,t.fid),t}async function getInstallationEntry(n){let r;var e=await update(n.appConfig,e=>{var t,e=clearTimedOutRequest(e||{fid:generateFid(),registrationStatus:0}),a=(t=n,0===(e=e).registrationStatus?navigator.onLine?{installationEntry:a={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},registrationPromise:(async(t,a)=>{try{var e=await(async({appConfig:e,heartbeatServiceProvider:t},{fid:a})=>{let n=getInstallationsEndpoint(e),r=getHeaders$1(e),i=t.getImmediate({optional:!0});if(i){let e=await i.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}let o={fid:a,authVersion:"FIS_v2",appId:e.appId,sdkVersion:"w:0.6.9"},s={method:"POST",headers:r,body:JSON.stringify(o)},c=await retryIfServerError(()=>fetch(n,s));if(c.ok){let e=await c.json();return{fid:e.fid||a,registrationStatus:2,refreshToken:e.refreshToken,authToken:extractAuthTokenInfoFromResponse(e.authToken)}}throw await getErrorFromResponse("Create Installation",c)})(t,a);return set(t.appConfig,e)}catch(e){throw isServerError(e)&&409===e.customData.serverCode?await remove(t.appConfig):await set(t.appConfig,{fid:a.fid,registrationStatus:0}),e}})(t,a)}:{installationEntry:e,registrationPromise:Promise.reject(w.create("app-offline"))}:1===e.registrationStatus?{installationEntry:e,registrationPromise:waitUntilFidRegistration(t)}:{installationEntry:e});return r=a.registrationPromise,a.installationEntry});return""===e.fid?{installationEntry:await r}:{installationEntry:e,registrationPromise:r}}async function waitUntilFidRegistration(a){let e=await updateInstallationRequest(a.appConfig);for(;1===e.registrationStatus;)await sleep(100),e=await updateInstallationRequest(a.appConfig);if(0!==e.registrationStatus)return e;{let{installationEntry:e,registrationPromise:t}=await getInstallationEntry(a);return t||e}}function updateInstallationRequest(e){return update(e,e=>{if(e)return clearTimedOutRequest(e);throw w.create("installation-not-found")})}function clearTimedOutRequest(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function generateAuthTokenRequest({appConfig:e,heartbeatServiceProvider:t},a){[o,s]=[e,a.fid];let n=getInstallationsEndpoint(o)+`/${s}/authTokens:generate`,r=getHeadersWithAuth(e,a),i=t.getImmediate({optional:!0});var o,s;if(i){let e=await i.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}let c={installation:{sdkVersion:"w:0.6.9",appId:e.appId}},d={method:"POST",headers:r,body:JSON.stringify(c)},u=await retryIfServerError(()=>fetch(n,d));if(u.ok)return extractAuthTokenInfoFromResponse(await u.json());throw await getErrorFromResponse("Generate Auth Token",u)}async function refreshAuthToken(r,i=!1){let o;var e=await update(r.appConfig,t=>{if(!isEntryRegistered(t))throw w.create("not-registered");var a,n,e=t.authToken;if(!(i||2!==(a=e).requestStatus||(a=a,(n=Date.now())<a.creationTime)||a.creationTime+a.expiresIn<n+36e5))return t;if(1===e.requestStatus)return o=(async(e,t)=>{let a=await updateAuthTokenRequest(e.appConfig);for(;1===a.authToken.requestStatus;)await sleep(100),a=await updateAuthTokenRequest(e.appConfig);var n=a.authToken;return 0===n.requestStatus?refreshAuthToken(e,t):n})(r,i),t;{if(!navigator.onLine)throw w.create("app-offline");a=t,n={requestStatus:1,requestTime:Date.now()};let e=Object.assign(Object.assign({},a),{authToken:n});return o=(async(t,a)=>{try{var e=await generateAuthTokenRequest(t,a),n=Object.assign(Object.assign({},a),{authToken:e});return await set(t.appConfig,n),e}catch(e){throw!isServerError(e)||401!==e.customData.serverCode&&404!==e.customData.serverCode?(n=Object.assign(Object.assign({},a),{authToken:{requestStatus:0}}),await set(t.appConfig,n)):await remove(t.appConfig),e}})(r,e),e}});return o?await o:e.authToken}function updateAuthTokenRequest(e){return update(e,e=>{if(isEntryRegistered(e))return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;throw w.create("not-registered");var t})}function isEntryRegistered(e){return void 0!==e&&2===e.registrationStatus}async function getToken$2(e,t=!1){var a=e;return(a=(await getInstallationEntry(a)).registrationPromise)&&await a,await 0,(await refreshAuthToken(e,t)).token}function getMissingValueError$1(e){return w.create("missing-app-config-values",{valueName:e})}let publicFactory=e=>{e=e.getProvider("app").getImmediate();return{app:e,appConfig:(e=>{if(!e||!e.options)throw getMissingValueError$1("App Configuration");if(!e.name)throw getMissingValueError$1("App Name");var t;for(t of["projectId","apiKey","appId"])if(!e.options[t])throw getMissingValueError$1(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}})(e),heartbeatServiceProvider:_getProvider(e,"heartbeat"),_delete:()=>Promise.resolve()}},internalFactory=e=>{let t=e.getProvider("app").getImmediate(),a=_getProvider(t,"installations").getImmediate();return{getId:()=>(async e=>{var{installationEntry:t,registrationPromise:a}=await getInstallationEntry(e);return(a||refreshAuthToken(e)).catch(console.error),t.fid})(a),getToken:e=>getToken$2(a,e)}},I=(t(new Component("installations",publicFactory,"PUBLIC")),t(new Component("installations-internal",internalFactory,"PRIVATE")),e(h,"0.6.9"),e(h,"0.6.9","esm2017"),"BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4");var T,S;function arrayToBase64(e){e=new Uint8Array(e);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function base64ToArray(e){var e=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=atob(e),a=new Uint8Array(t.length);for(let e=0;e<t.length;++e)a[e]=t.charCodeAt(e);return a}(e=>{e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(T=T||{}),(e=>{e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(S=S||{});let E="firebase-messaging-store",D=null;function getDbPromise(){return D=D||openDB("firebase-messaging-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(E)}})}async function dbGet(t){let e=getKey(t),a=await getDbPromise(),n=await a.transaction(E).objectStore(E).get(e);if(n)return n;{let e=await(async r=>{if("databases"in indexedDB){let e=(await indexedDB.databases()).map(e=>e.name);if(!e.includes("fcm_token_details_db"))return null}let i=null;return(await openDB("fcm_token_details_db",5,{upgrade:async(t,e,a,n)=>{if(!(e<2)&&t.objectStoreNames.contains("fcm_token_object_Store")){var t=n.objectStore("fcm_token_object_Store"),n=await t.index("fcmSenderId").get(r);if(await t.clear(),n)if(2===e){let e=n;e.auth&&e.p256dh&&e.endpoint&&(i={token:e.fcmToken,createTime:null!=(t=e.createTime)?t:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:arrayToBase64(e.vapidKey)}})}else if(3===e){let e=n;i={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:arrayToBase64(e.auth),p256dh:arrayToBase64(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:arrayToBase64(e.vapidKey)}}}else if(4===e){let e=n;i={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:arrayToBase64(e.auth),p256dh:arrayToBase64(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:arrayToBase64(e.vapidKey)}}}}}})).close(),await deleteDB("fcm_token_details_db"),await deleteDB("fcm_vapid_details_db"),await deleteDB("undefined"),(e=>{var t;if(e&&e.subscriptionOptions)return t=e.subscriptionOptions,"number"==typeof e.createTime&&0<e.createTime&&"string"==typeof e.token&&0<e.token.length&&"string"==typeof t.auth&&0<t.auth.length&&"string"==typeof t.p256dh&&0<t.p256dh.length&&"string"==typeof t.endpoint&&0<t.endpoint.length&&"string"==typeof t.swScope&&0<t.swScope.length&&"string"==typeof t.vapidKey&&0<t.vapidKey.length})(i)?i:null})(t.appConfig.senderId);if(e)return await dbSet(t,e),e}}async function dbSet(e,t){var e=getKey(e),a=(await getDbPromise()).transaction(E,"readwrite");return await a.objectStore(E).put(t,e),await a.done,t}function getKey({appConfig:e}){return e.appId}let C=new ErrorFactory("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function requestDeleteToken(e,t){var a={method:"DELETE",headers:await getHeaders(e)};try{var n=await(await fetch(getEndpoint(e.appConfig)+"/"+t,a)).json();if(n.error){let e=n.error.message;throw C.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw C.create("token-unsubscribe-failed",{errorInfo:null==e?void 0:e.toString()})}}function getEndpoint({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}async function getHeaders({appConfig:e,installations:t}){t=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})}function getBody({p256dh:e,auth:t,endpoint:a,vapidKey:n}){a={web:{endpoint:a,auth:t,p256dh:e}};return n!==I&&(a.web.applicationPubKey=n),a}async function getTokenInternal(e){n=e.swRegistration,r=e.vapidKey;var t,a,n=await(await n.pushManager.getSubscription()||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:base64ToArray(r)})),r={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:n.endpoint,auth:arrayToBase64(n.getKey("auth")),p256dh:arrayToBase64(n.getKey("p256dh"))},n=await dbGet(e.firebaseDependencies);if(n){if(t=n.subscriptionOptions,(a=r).vapidKey===t.vapidKey&&a.endpoint===t.endpoint&&a.auth===t.auth&&a.p256dh===t.p256dh)return Date.now()>=n.createTime+6048e5?(async(e,t)=>{try{var a=await(async(t,a)=>{let e=await getHeaders(t),n=getBody(a.subscriptionOptions),r={method:"PATCH",headers:e,body:JSON.stringify(n)},i;try{let e=await fetch(getEndpoint(t.appConfig)+"/"+a.token,r);i=await e.json()}catch(t){throw C.create("token-update-failed",{errorInfo:null==t?void 0:t.toString()})}if(i.error){let e=i.error.message;throw C.create("token-update-failed",{errorInfo:e})}if(i.token)return i.token;throw C.create("token-update-no-token")})(e.firebaseDependencies,t),n=Object.assign(Object.assign({},t),{token:a,createTime:Date.now()});return await dbSet(e.firebaseDependencies,n),a}catch(e){throw e}})(e,{token:n.token,createTime:Date.now(),subscriptionOptions:r}):n.token;try{await requestDeleteToken(e.firebaseDependencies,n.token)}catch(e){console.warn(e)}}else;return getNewToken(e.firebaseDependencies,r)}async function deleteTokenInternal(e){var t,a=await dbGet(e.firebaseDependencies),a=(a&&(await requestDeleteToken(e.firebaseDependencies,a.token),a=getKey(a=e.firebaseDependencies),await(t=(await getDbPromise()).transaction(E,"readwrite")).objectStore(E).delete(a),await t.done),await e.swRegistration.pushManager.getSubscription());return!a||a.unsubscribe()}async function getNewToken(e,t){t={token:await(async(t,e)=>{var a=await getHeaders(t),e=getBody(e),a={method:"POST",headers:a,body:JSON.stringify(e)};let n;try{let e=await fetch(getEndpoint(t.appConfig),a);n=await e.json()}catch(t){throw C.create("token-subscribe-failed",{errorInfo:null==t?void 0:t.toString()})}if(n.error){let e=n.error.message;throw C.create("token-subscribe-failed",{errorInfo:e})}if(n.token)return n.token;throw C.create("token-subscribe-no-token")})(e,t),createTime:Date.now(),subscriptionOptions:t};return await dbSet(e,t),t.token}function externalizePayload(e){var t,a,n,r,i={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return a=i,(n=e).notification&&(a.notification={},(r=n.notification.title)&&(a.notification.title=r),(r=n.notification.body)&&(a.notification.body=r),(r=n.notification.image)&&(a.notification.image=r),r=n.notification.icon)&&(a.notification.icon=r),n=i,(a=e).data&&(n.data=a.data),r=i,((n=e).fcmOptions||null!=(t=n.notification)&&t.click_action)&&(r.fcmOptions={},(t=null!=(t=null==(t=n.fcmOptions)?void 0:t.link)?t:null==(t=n.notification)?void 0:t.click_action)&&(r.fcmOptions.link=t),n=null==(t=n.fcmOptions)?void 0:t.analytics_label)&&(r.fcmOptions.analyticsLabel=n),i}function getMissingValueError(e){return C.create("missing-app-config-values",{valueName:e})}((t,a)=>{var n=[];for(let e=0;e<t.length;e++)n.push(t.charAt(e)),e<a.length&&n.push(a.charAt(e));n.join("")})("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class MessagingService{constructor(e,t,a){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var n=(e=>{if(!e||!e.options)throw getMissingValueError("App Configuration Object");if(!e.name)throw getMissingValueError("App Name");var t=e.options;for(let e of["projectId","apiKey","appId","messagingSenderId"])if(!t[e])throw getMissingValueError(e);return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}})(e);this.firebaseDependencies={app:e,appConfig:n,installations:t,analyticsProvider:a}}_delete(){return Promise.resolve()}}async function registerDefaultSw(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{})}catch(e){throw C.create("failed-service-worker-registration",{browserErrorMessage:null==e?void 0:e.message})}}async function getToken$1(e,t){if(!navigator)throw C.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw C.create("permission-blocked");n=e,await!((a=null==t?void 0:t.vapidKey)?n.vapidKey=a:n.vapidKey||(n.vapidKey=I));var a=e,n=null==t?void 0:t.serviceWorkerRegistration;if(n||a.swRegistration||await registerDefaultSw(a),n||!a.swRegistration){if(!(n instanceof ServiceWorkerRegistration))throw C.create("invalid-sw-registration");a.swRegistration=n}return await 0,getTokenInternal(e)}async function logToScion(e,t,a){t=(e=>{switch(e){case S.NOTIFICATION_CLICKED:return"notification_open";case S.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}})(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(t,{message_id:a["google.c.a.c_id"],message_name:a["google.c.a.c_l"],message_time:a["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}let M="@firebase/messaging",WindowMessagingFactory=e=>{let t=new MessagingService(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>(async(e,t)=>{var a,n;(t=t.data).isFirebaseMessaging&&(e.onMessageHandler&&t.messageType===S.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(externalizePayload(t)):e.onMessageHandler.next(externalizePayload(t))),"object"==typeof(n=a=t.data))&&n&&"google.c.a.c_id"in n&&"1"===a["google.c.a.e"]&&await logToScion(e,t.messageType,a)})(t,e)),t},WindowMessagingInternalFactory=e=>{let t=e.getProvider("messaging").getImmediate();return{getToken:e=>getToken$1(t,e)}};async function isWindowSupported(){try{await new Promise((n,r)=>{try{let e=!0,t="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(t);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(t),n(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var e;r((null==(e=a.error)?void 0:e.message)||"")}}catch(n){r(n)}})}catch(e){return!1}return"undefined"!=typeof window&&(()=>{try{return"object"==typeof indexedDB}catch(e){return!1}})()&&!("undefined"==typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function getMessagingInWindow(e=n()){return isWindowSupported().then(e=>{if(!e)throw C.create("unsupported-browser")},e=>{throw C.create("indexed-db-unsupported")}),_getProvider(getModularInstance(e),"messaging").getImmediate()}async function getToken(e,t){return getToken$1(e=getModularInstance(e),t)}function deleteToken(e){return(async e=>{if(navigator)return e.swRegistration||await registerDefaultSw(e),deleteTokenInternal(e);throw C.create("only-available-in-window")})(e=getModularInstance(e))}function onMessage(e,t){var a=e=getModularInstance(e),e=t;if(navigator)return a.onMessageHandler=e,()=>{a.onMessageHandler=null};throw C.create("only-available-in-window")}t(new Component("messaging",WindowMessagingFactory,"PUBLIC")),t(new Component("messaging-internal",WindowMessagingInternalFactory,"PRIVATE")),e(M,"0.12.12"),e(M,"0.12.12","esm2017");export{deleteToken,getMessagingInWindow as getMessaging,getToken,isWindowSupported as isSupported,onMessage};
//# sourceMappingURL=firebase-messaging.min.js.map
